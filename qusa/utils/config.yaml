# QUSA/config.yaml

# ------------------
# Path resolution
# ------------------
paths:
  models_dir: ~/Projects/QUSA/models
  data_dir: ~/Projects/QUSA/data
  reports_dir: ~/Projects/QUSA/reports

# ------------------
# Data settings
# ------------------
data:
  start_date: '2023-12-01'
  end_date: '2025-12-01'

  tickers:
    - AMZN

  paths:
    raw_data_dir: '~/Projects/qusa/data/raw'
    processed_data_dir: '~/Projects/qusa/data/processed'
    figures_dir: '~/Projects/qusa/data/figures'
    predictions_dir: '~/Projects/qusa/data/predictions'

# ------------------
# Feature engineering
# ------------------
features:
  rsi_window: 14
  atr_window: 14
  volume_ma_window: 20
  rolling_window_52w: 252

# ------------------
# Analysis settings
# ------------------
analysis:
  abnormal_threshold: 2.0
  minimum_event_occurrences: 20
  strong_lift: 1.5
  moderate_lift: 1.2


# ------------------
# Model settings
# ------------------
model:
  output:
    model_output_path: "~/Projects/qusa/saved_models"

  parameters:
    max_depth: 5
    min_samples_leaf: 10
    min_samples_split: 20
    class_weight: balanced
    random_state: 42
    test_size: 0.25
    cv: 5
    probability_threshold: 0.7

# ------------------
# Supported report types
# ------------------
enabled_reports:
    - backtest
    - evaluation
    - training
    - model_interpretation

# -----------------
# Model interpretation
# -----------------
model_interpretation:
  feature_importance:
    top_n: 20

  decision_rules:
    max_depth: 4

  prediction_analysis:
    enabled: true
    confidence_thresholds:
      high: 0.7
      low: 0.3

  limitations:
    max_tree_depth_warning: 10
    max_leaf_nodes_warning: 100
    unused_feature_pct_warning: 50
    dominant_feature_pct_warning: 0.5
    min_samples_leaf_warning: 10

  save_results: true

# ----------------
# Model inference
# ---------------
prediction:
  save: true
  log_file: "~/Projects/qusa/data/predictions/prediction_log.csv"


# ------------------
# Backtesting settings
# ------------------
backtest:
    initial_capital: 10000
    position_size: 0.95
    transaction_cost: 0.05      # % cost per trade (slippage + spread)
    save_results: true
    save_plots: true

# ------------------
# LLM Settings
# ------------------
llm:
  model_name: "gemma3:4b"                 # Ollama model to use
  temperature: 0.3
  max_context_rows: 10                    # Max rows of data to include in context
  output_dir: "~/Projects/qusa/reports"   # Base directory for all reports
  enable_reports: true                    # Master switch to enable/disable AI reports
  report_subdir:
    backtest: "backtest"
    evaluation: "evaluation"
    training: "training"
    interpretation: "interpretation"

# ------------------
# Full modeling pipeline settings
# ------------------
pipeline:
  skip_fe: false
  skip_clustering: false
  skip_backtest: false